
*- Get the required data -;data pkparm;    set G_BFA29p.A_PKPARM;
    if PARMVAL > 0 then PKVAL = log(PARMVAL);    where  PARM_FLG=1 and PK_ANLYS=1 and PARAM in ('AUCINF_obs' 'AUClast' 'Cmax');    keep STY1A SID1A USUBJID AGEDRV1N AYL1A PARAM PARMVAL PARMUNIT SBJGROUP SBJMATCH         PKVAL;run;
%macro CovComp_Test(OUT_DS=, AYL=, PKPM=);%*- Sort the data -;proc sort data=pkparm out=&out_ds;    by AYL1A PARAM PARMUNIT; where AYL1A="&AYL" and PARAM="&PKPM";run;
%*- Model Original: Paired data -;proc mixed data=&out_ds;     by AYL1A PARAM PARMUNIT;
    CLASS SID1A SBJMATCH SBJGROUP;    MODEL PKVAL = SBJGROUP / ddfm=kr outpred =RES_&out_ds._p;    RANDOM SBJMATCH;
    ESTIMATE "Severe vs Mathched healthy to severe" SBJGROUP  1 -1 /cl alpha=0.10;    LSMEANS SBJGROUP / alpha=0.1;
    %* statistics output datasets.;    ODS OUTPUT estimates = EST_&out_ds._p            lsmeans = LSM_&out_ds._p;run;
%*- Model Optional: Grouped data -;proc mixed data=&out_ds;     by AYL1A PARAM PARMUNIT;
    CLASS SID1A SBJGROUP;    MODEL PKVAL = SBJGROUP / ddfm=kr outpred =RES_&out_ds._g;    %*RANDOM SBJMATCH;
    ESTIMATE "Severe vs Mathched healthy to severe" SBJGROUP  1 -1 /cl alpha=0.10;    LSMEANS SBJGROUP / alpha=0.1;
    %* statistics output datasets.;    ODS OUTPUT estimates = EST_&out_ds._g            lsmeans = LSM_&out_ds._g;run;%mend;
%CovComp_Test(OUT_DS=B1_AUCI, AYL=BAF312, PKPM=AUCINF_obs);%CovComp_Test(OUT_DS=B1_AUCL, AYL=BAF312, PKPM=AUClast);%CovComp_Test(OUT_DS=B1_CMAX, AYL=BAF312, PKPM=Cmax);
%CovComp_Test(OUT_DS=L2_AUCI, AYL=LNL925, PKPM=AUCINF_obs);%CovComp_Test(OUT_DS=L2_AUCL, AYL=LNL925, PKPM=AUClast);%CovComp_Test(OUT_DS=L2_CMAX, AYL=LNL925, PKPM=Cmax);
%CovComp_Test(OUT_DS=L3_AUCL, AYL=LNL931, PKPM=AUClast);%CovComp_Test(OUT_DS=L3_CMAX, AYL=LNL931, PKPM=Cmax);
